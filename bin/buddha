#!/usr/bin/env node

var buddha = require('../lib/buddha.js');
var program = require('commander');

program
  .option('-h, --host [host]', 'host')
  .option('-e, --email [email]', 'email account')
  .option('-p, --password [password]', 'account password')
  .option('-t, --tickets [view]', 'view tickets')
  .option('-u, --users', 'view users')
  .parse(process.argv);

console.log('querying: ' + program.host);

buddha.setCredentials(program.host, program.email, program.password);

if(program.tickets) {
  buddha.getTickets(function(error, results) {
    if(error) {
      console.log('error getting tickets: ' + error);
      process.exit(1);
    }
    console.log('results: ' + results);
    process.exit(0);
  });
}
else if(program.users) {
  buddha.getUsers(function(error, results) {
    if(error) {
      console.log('error: ' + error);
      process.exit(1);
    }
    console.log('results: ' + results);
    process.exit(0);
  });
}